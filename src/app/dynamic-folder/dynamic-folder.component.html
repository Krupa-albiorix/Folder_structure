<div class="view-port">
    <div class="container">
        <div class="title">Folder Structure</div><br>
        <div class="content">

            <button mat-raised-button (click)="add_more_field()">Add Folder to Root</button>&nbsp;

            <div *ngIf="show_form">
                <form [formGroup]="folderdetails">

                    <mat-form-field class="example-full-width">
                        <input matInput #itemValue name="name" type="folder" formControlName="name">
                            <mat-error *ngIf="folderdetails.get('name')?.hasError('required')">
                                Name is <strong>required</strong>...
                            </mat-error>
                    </mat-form-field>&nbsp;

                    <button mat-raised-button (click)="add_data()"><mat-icon>add</mat-icon></button>&nbsp;

                </form>
            </div>
                    <ul>
                        <ng-template #recursiveList let-inputfolder>
                          <li *ngFor="let item of inputfolder; let i = index;" style="margin-left:30px; margin-bottom: 5px;">
                            {{item.name}}&nbsp;
                            <!-- <ul *ngIf="item.chidren?.length > 0" style="margin-bottom: 5px;">
                                <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: item.children }"></ng-container>
                            </ul> -->

                            <mat-icon (click)="removeAddress(i)" style="margin-top: 5px;">delete</mat-icon>&nbsp;

                            <mat-icon (click)="addsubfolder(item)">add</mat-icon>

                            <div *ngIf="item.show_select">
                                <form [formGroup]="subfolderdetails">

                                    <mat-form-field>
                                        <mat-label>Choose an option</mat-label>
                                        <mat-select formControlName="subchoice">
                                        <mat-option value="folder">Folder</mat-option>
                                        <mat-option value="file">file</mat-option>
                                        </mat-select>
                                    </mat-form-field>&nbsp;
                    
                                    <mat-form-field class="example-full-width">
                                        <input matInput #itemValue name="subname" type="text" formControlName="subname">
                                            <mat-error *ngIf="subfolderdetails.get('subname')?.hasError('required')">
                                                Name is <strong>required</strong>...
                                            </mat-error>
                                    </mat-form-field>&nbsp;
                    
                                    <button mat-raised-button (click)="add_subdata(i, item)"><mat-icon>add</mat-icon></button>&nbsp;
                    
                                </form>
                            </div>

                            <!-- <ul *ngIf="item.children?.length > 0" style="margin-bottom: 5px;">
                              <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: item.children }"></ng-container>
                            </ul> -->
                          </li>
                        </ng-template>
                        <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: inputfolder }"></ng-container>
                    </ul>
                {{ inputfolder | json}}
        </div>
    </div>
</div> 